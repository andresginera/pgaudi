language: python
python:
  - 2.7
os:
  - linux
before_install:
  - chmod +x devtools/travis-ci/chimera.sh
  - chmod +x devtools/travis-ci/miniconda.sh
  # Chimera:
  - devtools/travis-ci/chimera.sh
  # Miniconda:
  - devtools/travis-ci/miniconda.sh
install:
  # Configure conda
  - source $HOME/miniconda/etc/profile.d/conda.sh
  - conda config --set always_yes yes
  - conda config --remove-key channels || true
  - conda config --add channels defaults
  - conda config --add channels insilichem
  - conda activate
  # Install Gaudi, Pychimera and Pytest
  - conda install -c omnia -c salilab -c insilichem -c bioconda gaudi
  - conda install -c insilichem pychimera pytest
  - conda install pcre=8.39
  - conda install six
  - export CHIMERADIR="$HOME/chimera"
  # Install PGaudi
  - pip install .
script:
  # Check package
  - cd tests
  - python run_test.py